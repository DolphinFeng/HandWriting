import {createViewer} from '../../cesium/initMap';
import {Color, Cartesian3} from 'cesium';
import axios from 'axios';

const {nadTileServiceURL} = api;

const viewer = createViewer();

let nadRangeEntities = [];

export const createNadRangeHighlightLineEntity = async function () {
  const res = await axios.get(nadTileServiceURL + '/nmap/odd/mesh/queryOutline');
  let polygons = JSON.parse(res.data.data);

  for (let polygon of polygons) {
    let linePosition = [];
    for (let j = 0; j < polygon.length; j++) {
      var point = Cartesian3.fromDegrees(polygon[j][0], polygon[j][1], 5.0);
      linePosition.push(point);
    }

    var polyline = viewer.entities.add({
      polyline: {
        show: true,
        positions: linePosition, // 获取或设置指定 Cartesian3 数组的属性定义线条的位置。
        // 获取或设置指定用于绘制折线的材料的属性。
        material: Color.GREEN,
        width: 2,
        clampToGround: true,
      },
    });

    nadRangeEntities.push(polyline);
  }
};

//创建临时高亮线条
/*export const createNadRangeHighlightLineEntity = function () {
  let coordinates = [
    [121.26708984375, 31.5087890625],
    [121.2890625, 31.5087890625],
    [121.31103515625, 31.5087890625],
    [121.31103515625, 31.48681640625],
    [121.3330078125, 31.48681640625],
    [121.3330078125, 31.46484375],
    [121.3330078125, 31.44287109375],
    [121.35498046875, 31.44287109375],
    [121.35498046875, 31.4208984375],
    [121.3330078125, 31.4208984375],
    [121.3330078125, 31.39892578125],
    [121.35498046875, 31.39892578125],
    [121.376953125, 31.39892578125],
    [121.39892578125, 31.39892578125],
    [121.39892578125, 31.4208984375],
    [121.4208984375, 31.4208984375],
    [121.44287109375, 31.4208984375],
    [121.46484375, 31.4208984375],
    [121.48681640625, 31.4208984375],
    [121.5087890625, 31.4208984375],
    [121.5087890625, 31.39892578125],
    [121.53076171875, 31.39892578125],
    [121.53076171875, 31.376953125],
    [121.552734375, 31.376953125],
    [121.57470703125, 31.376953125],
    [121.5966796875, 31.376953125],
    [121.5966796875, 31.35498046875],
    [121.61865234375, 31.35498046875],
    [121.640625, 31.35498046875],
    [121.640625, 31.3330078125],
    [121.66259765625, 31.3330078125],
    [121.66259765625, 31.31103515625],
    [121.6845703125, 31.31103515625],
    [121.70654296875, 31.31103515625],
    [121.70654296875, 31.2890625],
    [121.70654296875, 31.26708984375],
    [121.728515625, 31.26708984375],
    [121.728515625, 31.2451171875],
    [121.75048828125, 31.2451171875],
    [121.75048828125, 31.22314453125],
    [121.75048828125, 31.201171875],
    [121.7724609375, 31.201171875],
    [121.7724609375, 31.17919921875],
    [121.75048828125, 31.17919921875],
    [121.728515625, 31.17919921875],
    [121.728515625, 31.1572265625],
    [121.70654296875, 31.1572265625],
    [121.70654296875, 31.13525390625],
    [121.70654296875, 31.11328125],
    [121.6845703125, 31.11328125],
    [121.66259765625, 31.11328125],
    [121.66259765625, 31.09130859375],
    [121.66259765625, 31.0693359375],
    [121.66259765625, 31.04736328125],
    [121.66259765625, 31.025390625],
    [121.66259765625, 31.00341796875],
    [121.640625, 31.00341796875],
    [121.61865234375, 31.00341796875],
    [121.5966796875, 31.00341796875],
    [121.57470703125, 31.00341796875],
    [121.552734375, 31.00341796875],
    [121.53076171875, 31.00341796875],
    [121.5087890625, 31.00341796875],
    [121.48681640625, 31.00341796875],
    [121.46484375, 31.00341796875],
    [121.44287109375, 31.00341796875],
    [121.44287109375, 30.9814453125],
    [121.4208984375, 30.9814453125],
    [121.39892578125, 30.9814453125],
    [121.376953125, 30.9814453125],
    [121.35498046875, 30.9814453125],
    [121.3330078125, 30.9814453125],
    [121.31103515625, 30.9814453125],
    [121.2890625, 30.9814453125],
    [121.2890625, 31.00341796875],
    [121.2890625, 31.025390625],
    [121.26708984375, 31.025390625],
    [121.26708984375, 31.04736328125],
    [121.2451171875, 31.04736328125],
    [121.2451171875, 31.0693359375],
    [121.22314453125, 31.0693359375],
    [121.201171875, 31.0693359375],
    [121.17919921875, 31.0693359375],
    [121.1572265625, 31.0693359375],
    [121.13525390625, 31.0693359375],
    [121.13525390625, 31.09130859375],
    [121.13525390625, 31.11328125],
    [121.1572265625, 31.11328125],
    [121.1572265625, 31.13525390625],
    [121.1572265625, 31.1572265625],
    [121.1572265625, 31.17919921875],
    [121.17919921875, 31.17919921875],
    [121.17919921875, 31.201171875],
    [121.201171875, 31.201171875],
    [121.201171875, 31.22314453125],
    [121.22314453125, 31.22314453125],
    [121.22314453125, 31.2451171875],
    [121.201171875, 31.2451171875],
    [121.17919921875, 31.2451171875],
    [121.1572265625, 31.2451171875],
    [121.1572265625, 31.26708984375],
    [121.13525390625, 31.26708984375],
    [121.13525390625, 31.2890625],
    [121.13525390625, 31.31103515625],
    [121.13525390625, 31.3330078125],
    [121.13525390625, 31.35498046875],
    [121.11328125, 31.35498046875],
    [121.09130859375, 31.35498046875],
    [121.09130859375, 31.376953125],
    [121.11328125, 31.376953125],
    [121.13525390625, 31.376953125],
    [121.13525390625, 31.39892578125],
    [121.1572265625, 31.39892578125],
    [121.1572265625, 31.4208984375],
    [121.1572265625, 31.44287109375],
    [121.13525390625, 31.44287109375],
    [121.13525390625, 31.46484375],
    [121.1572265625, 31.46484375],
    [121.17919921875, 31.46484375],
    [121.17919921875, 31.48681640625],
    [121.201171875, 31.48681640625],
    [121.201171875, 31.46484375],
    [121.22314453125, 31.46484375],
    [121.22314453125, 31.48681640625],
    [121.2451171875, 31.48681640625],
    [121.26708984375, 31.48681640625],
    [121.26708984375, 31.5087890625],
  ];

  let shenzhenCoordinates = [
    [113.84033203125, 22.8515625],

    [113.88427734375, 22.8515625],
    [113.88427734375, 22.82958984375],

    [113.90625, 22.82958984375],
    [113.90625, 22.8076171875],

    [113.9501953125, 22.8076171875],

    [113.9501953125, 22.74169921875],
    [113.97216796875, 22.74169921875],

    [113.97216796875, 22.763671875],

    [114.01611328125, 22.763671875],
    [114.01611328125, 22.78564453125],

    [114.06005859375, 22.78564453125],
    [114.06005859375, 22.763671875],

    [114.10400390625, 22.763671875],

    [114.10400390625, 22.7197265625],

    [114.14794921875, 22.7197265625],

    [114.14794921875, 22.67578125],
    [114.169921875, 22.67578125],

    [114.169921875, 22.7197265625],
    [114.19189453125, 22.7197265625],

    [114.19189453125, 22.74169921875],
    [114.169921875, 22.74169921875],
    [114.169921875, 22.763671875],

    [114.23583984375, 22.763671875],
    [114.23583984375, 22.78564453125],
    [114.2578125, 22.78564453125],

    [114.2578125, 22.8076171875],

    [114.32373046875, 22.8076171875],
    [114.32373046875, 22.82958984375],
    [114.345703125, 22.82958984375],

    [114.345703125, 22.78564453125],
    [114.36767578125, 22.78564453125],
    [114.36767578125, 22.763671875],

    [114.3896484375, 22.763671875],
    [114.3896484375, 22.78564453125],

    [114.43359375, 22.78564453125],
    [114.43359375, 22.763671875],
    [114.41162109375, 22.763671875],

    [114.41162109375, 22.67578125],

    [114.36767578125, 22.67578125],
    [114.36767578125, 22.65380859375],

    [114.32373046875, 22.65380859375],
    [114.32373046875, 22.6318359375],
    [114.3017578125, 22.6318359375],
    [114.3017578125, 22.65380859375],

    [114.2578125, 22.65380859375],

    [114.2578125, 22.60986328125],

    [114.3017578125, 22.60986328125],
    [114.3017578125, 22.587890625],

    [114.27978515625, 22.587890625],
    [114.27978515625, 22.56591796875],

    [114.23583984375, 22.56591796875],
    [114.23583984375, 22.5439453125],

    [114.14794921875, 22.5439453125],
    [114.14794921875, 22.52197265625],

    [114.08203125, 22.52197265625],
    [114.08203125, 22.5],

    [114.01611328125, 22.5],
    [114.01611328125, 22.52197265625],

    [113.97216796875, 22.52197265625],
    [113.97216796875, 22.5],

    [113.9501953125, 22.5],
    [113.9501953125, 22.47802734375],

    [113.90625, 22.47802734375],
    [113.90625, 22.4560546875],
    [113.88427734375, 22.4560546875],
    [113.88427734375, 22.47802734375],

    [113.8623046875, 22.47802734375],

    [113.8623046875, 22.5439453125],
    [113.84033203125, 22.5439453125],
    [113.84033203125, 22.56591796875],

    [113.818359375, 22.56591796875],
    [113.818359375, 22.587890625],

    [113.79638671875, 22.587890625],
    [113.79638671875, 22.60986328125],

    [113.7744140625, 22.60986328125],
    [113.7744140625, 22.6318359375],

    [113.75244140625, 22.6318359375],

    [113.75244140625, 22.763671875],

    [113.79638671875, 22.763671875],
    [113.79638671875, 22.78564453125],

    [113.7744140625, 22.78564453125],
    [113.7744140625, 22.8076171875],

    [113.84033203125, 22.8076171875],

    [113.84033203125, 22.8515625],
  ];

  let beijingCoordinates = [
    [116.21337890625, 40.166015625],
    [116.2353515625, 40.166015625],
    [116.2353515625, 40.14404296875],
    [116.2353515625, 40.1220703125],
    [116.30126953125, 40.1220703125],
    [116.30126953125, 40.10009765625],
    [116.3232421875, 40.10009765625],
    [116.3232421875, 40.05615234375],
    [116.34521484375, 40.05615234375],
    [116.34521484375, 40.0341796875],
    [116.455078125, 40.0341796875],
    [116.455078125, 40.078125],
    [116.4990234375, 40.078125],
    [116.4990234375, 40.05615234375],
    [116.47705078125, 40.05615234375],
    [116.47705078125, 40.0341796875],
    [116.52099609375, 40.0341796875],
    [116.52099609375, 39.96826171875],
    [116.54296875, 39.96826171875],
    [116.54296875, 39.9462890625],
    [116.56494140625, 39.9462890625],
    [116.56494140625, 39.96826171875],
    [116.5869140625, 39.96826171875],
    [116.5869140625, 39.92431640625],
    [116.69677734375, 39.92431640625],
    [116.69677734375, 39.9462890625],
    [116.6748046875, 39.9462890625],
    [116.6748046875, 39.96826171875],
    [116.69677734375, 39.96826171875],
    [116.69677734375, 39.990234375],
    [116.71875, 39.990234375],
    [116.71875, 39.9462890625],
    [116.806640625, 39.9462890625],
    [116.806640625, 39.92431640625],
    [116.74072265625, 39.92431640625],
    [116.74072265625, 39.88037109375],
    [116.71875, 39.88037109375],
    [116.71875, 39.8583984375],
    [116.69677734375, 39.8583984375],
    [116.69677734375, 39.83642578125],
    [116.71875, 39.83642578125],
    [116.71875, 39.814453125],
    [116.630859375, 39.814453125],
    [116.630859375, 39.83642578125],
    [116.60888671875, 39.83642578125],
    [116.60888671875, 39.79248046875],
    [116.5869140625, 39.79248046875],
    [116.5869140625, 39.814453125],
    [116.54296875, 39.814453125],
    [116.54296875, 39.79248046875],
    [116.56494140625, 39.79248046875],
    [116.56494140625, 39.7705078125],
    [116.60888671875, 39.7705078125],
    [116.60888671875, 39.7265625],
    [116.47705078125, 39.7265625],
    [116.47705078125, 39.70458984375],
    [116.3671875, 39.70458984375],
    [116.3671875, 39.6826171875],
    [116.3232421875, 39.6826171875],
    [116.3232421875, 39.66064453125],
    [116.30126953125, 39.66064453125],
    [116.30126953125, 39.70458984375],
    [116.3232421875, 39.70458984375],
    [116.3232421875, 39.7705078125],
    [116.279296875, 39.7705078125],
    [116.279296875, 39.74853515625],
    [116.25732421875, 39.74853515625],
    [116.25732421875, 39.79248046875],
    [116.2353515625, 39.79248046875],
    [116.2353515625, 39.814453125],
    [116.21337890625, 39.814453125],
    [116.21337890625, 39.79248046875],
    [116.19140625, 39.79248046875],
    [116.19140625, 39.88037109375],
    [116.12548828125, 39.88037109375],
    [116.12548828125, 39.92431640625],
    [116.19140625, 39.92431640625],
    [116.19140625, 39.990234375],
    [116.21337890625, 39.990234375],
    [116.21337890625, 40.01220703125],
    [116.25732421875, 40.01220703125],
    [116.25732421875, 40.0341796875],
    [116.279296875, 40.0341796875],
    [116.279296875, 40.078125],
    [116.2353515625, 40.078125],
    [116.2353515625, 40.10009765625],
    [116.21337890625, 40.10009765625],
    [116.21337890625, 40.166015625],
  ];

  let linePosition = [];
  let shenzhenlinePositin = [];
  let beijingPosition = [];
  for (let j = 0; j < coordinates.length; j++) {
    var point = Cartesian3.fromDegrees(coordinates[j][0], coordinates[j][1], 5.0);
    linePosition.push(point);
  }

  for (let j = 0; j < shenzhenCoordinates.length; j++) {
    var point = Cartesian3.fromDegrees(shenzhenCoordinates[j][0], shenzhenCoordinates[j][1], 5.0);
    shenzhenlinePositin.push(point);
  }

  for (let j = 0; j < beijingCoordinates.length; j++) {
    var point = Cartesian3.fromDegrees(beijingCoordinates[j][0], beijingCoordinates[j][1], 5.0);
    beijingPosition.push(point);
  }

  var polyline = viewer.entities.add({
    polyline: {
      show: true,
      positions: linePosition, // 获取或设置指定 Cartesian3 数组的属性定义线条的位置。
      // 获取或设置指定用于绘制折线的材料的属性。
      material: Color.RED,
      width: 3,
      clampToGround: true,
    },
  });

  nadRangeEntities.push(polyline);

  var shenzhenpolyline = viewer.entities.add({
    polyline: {
      show: true,
      positions: shenzhenlinePositin, // 获取或设置指定 Cartesian3 数组的属性定义线条的位置。
      // 获取或设置指定用于绘制折线的材料的属性。
      material: Color.RED,
      width: 3,
      clampToGround: true,
    },
  });

  nadRangeEntities.push(shenzhenpolyline);

  var beijingpolyline = viewer.entities.add({
    polyline: {
      show: true,
      positions: beijingPosition, // 获取或设置指定 Cartesian3 数组的属性定义线条的位置。
      // 获取或设置指定用于绘制折线的材料的属性。
      material: Color.RED,
      width: 3,
      clampToGround: true,
    },
  });

  nadRangeEntities.push(beijingpolyline);
};
*/

export const clearAllRangeEntities = function () {
  for (let i = 0; i < nadRangeEntities.length; i++) {
    viewer.entities.remove(nadRangeEntities[i]);
  }

  nadRangeEntities = [];
};
